@using ExpenseTrackerApp.Models;
@{
    var profileData = Session["UserProfile"] as DAL.UserProfileSessionData;
}
<style>
     .red {
        background-color: rgba(255, 0, 0, 0.5);
    }
     .green{
         background-color: lightgreen;
     }
</style>
<div class="row">
    <div class="page-title">
        <div class="pull-left ">
            <h1><span>Quiz Management System</span><i class="material-icons">&#xE315;</i> @ViewBag.QuizName</h1>
        </div>
        <ul class="pull-right list-inline topFields">
            <li>
                <label for="agent-name" class="control-label">User ID</label>
            </li>
            <li>
                <input type="text" readonly="true" maxlength="250" value="@profileData.User_Name" class="form-control ignore" id="UserName" placeholder="">
            </li>
        </ul>
        <!-- /.control-group -->
    </div>
</div>
<div class="clearfix"></div>
<div id="Result" class="fixed-panel-container">
    <div class="panel panel-default">
        <div class="panel-heading">
            Result
        </div>

        <div class="panel-body">

            <fieldset class="row">
                <input type="hidden" id="QID" value="@ViewBag.QuizID"/>
                <input type="hidden" id="UID" value="@profileData.User_ID" />
                <div class="form-group col-md-3">
                    <label class="control-label"><b>Total Questions </b></label>&nbsp;&nbsp;
                    <label class="control-label"><b>@ViewBag.QuestionCount</b></label>&nbsp;&nbsp;
                </div>
                <div class="clearfix"></div>
                <div class="form-group col-md-3">
                    <label class="control-label"><b>Correct Answers</b></label>&nbsp;&nbsp;
                    <label class="control-label"><b>@ViewBag.CorrectAnswer</b></label>&nbsp;&nbsp;
                </div>
                <div class="clearfix"></div>
                <div class="form-group col-md-3">
                    <label class="control-label"><b>Wrong Answers</b></label>&nbsp;&nbsp;
                    <label class="control-label"><b>@ViewBag.WrongAnswer</b></label>&nbsp;&nbsp;
                </div>
                <div class="clearfix"></div>
                <div class="form-group col-md-3">
                    <label class="control-label"><b>Marks</b></label>&nbsp;&nbsp;
                    <label class="control-label"><b>@ViewBag.Marks</b></label>&nbsp;&nbsp;
                </div>
                <div class="clearfix"></div>
                <div class="form-group col-md-3">
                    <label class="control-label"><b>Status</b></label>&nbsp;&nbsp;
                    <label class="control-label"><b>@ViewBag.Status</b></label>&nbsp;&nbsp;
                </div>

            </fieldset>
            <button onclick="Result();">View Complete Result</button>
        </div>
    </div>
</div>

<div id="completeResult">
    <div class="clearfix"></div>
    <br/>
    <br />
    <br/>
    <table id="gridResults"></table>
</div>

<script type="text/javascript">
    function Result() {
        $("#Result").hide();
        $("#completeResult").show();

    }
    $(document).ready(function () {
        debugger;
        var uid = $("#UID").val();
        var qid = $("#QID").val();
       $("#completeResult").hide();
      
        var dataSource = new kendo.data.DataSource({
            transport: {

                read: {
                    url: '@Url.Action("GetCompleteResult", "Home")',
                    data: {
                        uid: uid,
                        qid: qid
                    },
                    dataType: "json" // "jsonp" is required for cross-domain requests; use "json" for same-domain requests
                }
            },
            //pageSize: 16
        });
        $("#gridResults").kendoGrid({


            dataSource: dataSource,

            scrollable: true,
            sortable: true,
            pageable: true,
            autoBind: true,
            resizable: true,

            columns: [


            {
                field: "id",
                hidden: true

            }, {
                field: "Question",
                title: "Question",
                width: 80
            }, {
                field: "Answer",
                title: "Answer",
                width: 80,

            }, {
                field: "CorrectAnswer",
                title: "CorrectAnswer",
                width: 80,

            },
            {
                field: "isCorrect",
                hidden:true

            }],
            rowTemplate: '<tr class="#:isCorrect==0? \"red\" : \"green\"#"  data-uid="#: uid #"><td>#:Question #</td><td>#:Answer #</td><td>#:CorrectAnswer #</td></tr>',
        });

    });
</script>